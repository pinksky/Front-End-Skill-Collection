# 腾讯面试准备

### XMLHttpRequest
- 概况
    + 所有现代浏览器均支持 XMLHttpRequest 对象（IE5 和 IE6 使用 ActiveXObject）
    + XMLHttpRequest 用于在后台与服务器交换数据。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。
    + 所有现代浏览器（IE7+、Firefox、Chrome、Safari 以及 Opera）均内建 XMLHttpRequest 对象。
- 语法
    + variable=new XMLHttpRequest();
    + 老版本的 Internet Explorer （IE5 和 IE6）使用 ActiveX 对象：variable=new ActiveXObject("Microsoft.XMLHTTP");
- 向服务器发送请求
    + 如需将请求发送到服务器，我们使用 XMLHttpRequest 对象的 open() 和 send() 方法: xmlhttp.open("GET","test1.txt",true); xmlhttp.send();
    + ii.   如果需要像 HTML 表单那样 POST 数据，请使用 setRequestHeader() 来添加 HTTP 头。然后在 send() 方法中规定您希望发送的数据：
        * xmlhttp.open("POST","ajax_test.asp",true);
        * xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        * xmlhttp.send("fname=Bill&lname=Gates");
- 服务器响应
    + 如需获得来自服务器的响应，请使用 XMLHttpRequest 对象的 responseText 或 responseXML 属
    + responseText：获得字符串形式的响应数据。
    + iii.  responseXML:获得 XML 形式的响应数据。
- onreadystatechange 事件
    + 当请求被发送到服务器时，我们需要执行一些基于响应的任务。每当 readyState 改变时，就会触发 onreadystatechange 事件。readyState 属性存有 XMLHttpRequest 的状态信息。
    + 在 onreadystatechange事件中，我们规定当服务器响应已做好被处理的准备时所执行的任务。当 readyState 等于 4 且状态为 200 时，表示响应已就绪：
- 下面是 XMLHttpRequest 对象的三个重要的属性：
    + onreadystatechange: 存储函数（或函数名），每当 readyState 属性改变时，就会调用该函数。
    + readyState: 存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。
        * 0: 请求未初始化
        * 1: 服务器连接已建立
        * 2: 请求已接收
        * 3: 请求处理中
        * 4: 请求已完成，且响应已就绪
    + status
        * 200: "OK"
        * 404: 未找到页面

### HTTP状态码
- HTTP状态码的作用是：Web服务器用来告诉客户端，发生了什么事。状态码位于HTTP Response的第一行中，会返回一个”三位数字的状态码“和一个“状态消息”。 ”三位数字的状态码“便于程序进行处理， “状态消息”更便于人理解。
- 状态码分类
    + HTTP状态码被分为五大类， 目前我们使用的HTTP协议版本是1.1
    + 1XX 信息性状态码
        * 信息提示
    + 2XX 成功状态码
        * 客户端发起请求时， 这些请求通常都是成功的。服务器有一组用来表示成功的状态码，分别对应于不同类型的请求。
    + 3XX 重定向状态码
        * 重定向状态码用来告诉浏览器客户端，它们访问的资源已被移动，Web服务器发送一个重定向状态码和一个可选的Location Header, 告诉客户端新的资源地址在哪。浏览器客户端会自动用Location中提供的地址，重新发送新的Request。 这个过程对用户来说是透明的。
        * 301和302 非常相似， 一个是永久转移，一个是临时转移。
    + 4XX客户端错误状态码
        * 有时客户端会发送一些服务器无法处理的东西，比如格式错误的Request, 或者最常见的是， 请求一个不存在的URL。
    + 5XX服务器错误状态码
        * 有时候客户端发送了一条有效Request,
        Web服务器自身却出错了。 可能是Web服务器运行出错了， 或者网站都挂了。  5XX就是用来描述服务器错误的。
        * 500: Internal Server Error(内部服务器错误)
        * 501: 客户端发起的请求超出服务器的能力范围(比如，使用了服务器不支持的请求方法)时，使用此状态码。
        * 502: Bad Gateway（网关故障）,代理使用的服务器遇到了上游的无效响应

### Javascript事件冒泡和捕获
- 在支持w3c dom(文档对象模型) 的浏览器中，传统的事件绑定方法是:element1.onclick = doSomething2;默认被视为在绑定于冒泡阶段
- 事件冒泡
    + IE中采用的事件流是事件冒泡，先从具体的接收元素，然后逐步向上传播到不具体的元素。
- 事件捕获
    + Netscapte采用事件捕获，先由不具体的元素接收事件，最具体的节点最后才接收到事件。
- DOM事件流
    + DOM2级事件包括三个阶段：事件捕获阶段、处于目标阶段和事件冒泡阶段。
- 事件处理程序
    + DOM0级事件处理程序
        * 每个元素都有自己的事件处理程序属性，如onclick等。可以通过js将一个函数赋值给元素的事件处理程序属性。
    + DOM2级事件处理程序
        * DOM2有两个方法用来添加和移除事件处理程序：addEventListener()和removeEventListener()。它们都有三个参数：第一个参数是事件名（如click）；第二个参数是事件处理程序函数；第三个参数如果是true则表示在捕获阶段调用，为false表示在冒泡阶段调用。
        * addEventListener():可以为元素添加多个事件处理程序，触发时会按照添加顺序依次调用。
        * removeEventListener():不能移除匿名添加的函数。
    + IE事件处理程序
        * IE的事件处理程序也有两个类似的方法：attachEvent()和detachEvent()。它们有两个参数：第一个是事件名(如onlick)；第二个参数是事件处理程序的函数。
        * 事件名前面有on前缀；
        * 在事件处理程序的函数中，this不再指向当前元素，而是指向window对象。

### JavaScript拖拽
- 基本属性
    + clientX 事件属性返回当事件被触发时鼠标指针向对于浏览器页面（或客户区）的水平坐标。
    + offsetLeft获取对象相对于版面或由offsetParent属性指定的父坐标的计算左侧位置。
    + clientLeft获取 offsetLeft 属性和客户区域的实际左边之间的距离。
    + scrollLeft设置或获取位于对象左边界和窗口中目前可见内容的最左端之间的距离。

### 移动端动画
- 尽可能多的利用硬件能力，如使用3D变形来开启GPU加速
``` CSS
-webkit-transform: translate3d(0, 0, 0);
-moz-transform: translate3d(0, 0, 0);
-ms-transform: translate3d(0, 0, 0);
transform: translate3d(0, 0, 0);
```
- 如一个元素通过translate3d右移500px的动画流畅度会明显优于使用left属性。
- 尽可能少的使用box-shadows与gradients：box-shadows与gradients往往都是页面的性能杀手，尤其是在一个元素同时都使用了它们，所以拥抱扁平化设计吧。
- 尽可能的让动画元素不在文档流中，以减少重排：position: fixed;
position: absolute;